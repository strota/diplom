# diplom

Дипломная работа на тему "Построение графа друзей ВКонтакте и анализ компонент связности". Был придуман проект, по созданию 
приложения с отрисовкой графа.
Проект был поделён на две части и моей темой стало: создание серверной части данного приложения.

Главной идеей стало создание алгоритма для быстрой работы с VK API. Какой был выбран стек технологий и почему, какие сложности возникли
в ходе работы, подробнее об этом можно почитать по ссылке: https://docs.google.com/document/d/1e2bcqRaW1fH88GQwo4dNh5T48wGbSt5ifPAjC7hjtsA/edit 


Краткий экскурс в итоговый алгоритм (написан в server.js):
Алгоритм:
var id = id;
var friends_id = vk_api.friends.get(id, params = name, surname);
var mutual_friends = [];
var graph_friends = {};
for (var friends_25 in chunk(friends_id.id)) {
    mutual_friends.push(getMutualFriends(id, friends_25);
}
 
for (var i = 0; i < friends_id.length; i++) {
    graph_friends.add(‘name’: friends_id[i].name, ‘surname’:
                           friends_id[i].surname, ‘mutual_friends’: mutual_friends[i]);
}
 
 getMutualFriends(id, friends_id_25) {
    code = ‘ count = 0;
                 mutual_friends_id = [];
                 While (count < friends_id_25.length) {
                     mutual_friends_id.push(vk_api.friends.getMutual(id);
                     count = count + 1; }’
    var mutual_friends = vk_api.execute({code});
    return mutual_friends;

Пройдёмся по каждой строке псевдокода, чтобы понять, как он работает.
Берём переданный id с клиента и кладём его в переменную;
Навешиваем на id метод friends.get для того, чтобы получить непосредственно список друзей. Пусть это будет список “А”. Также передаём дополнительные параметры: name и surname. В итоге сервер получит массив из объектов, в которых будут лежать id пользователя и его имя и фамилия;
Инициализируем массив общих друзей;
Инициализируем json-объект, который будет отправлен на клиентскую часть по завершению работы алгоритма;
     5-7. Далее мы разбиваем наш список на элементы, состоящие из 25
          id-шников пользователей. Тем самым, мы работаем не с одним id, а
          сразу с 25. Передаём id пользователя и id 25 друзей в функцию
          getMutualFriends и результат добавляем в массив общих друзей;
     11-17. В функции getMutualFriends задаётся строкой код, который будет
          отправлен на сервер ВКонтакте, где он и исполнится. В этом коде
          прописывается, что проходимся по всем двадцати пяти друзьям и для  
          каждого получаем массив id-шников общих друзей с изначальным
          пользователем. И отправляем его на сервер при помощи метода execute. 
      8-10. Пробегаемся по всем друзьям и добавляем в итоговый json-объект
информацию с ключами: first_name (имя), last_name (фамилия),  common_friends (список общих друзей). Список common_friends - это будущие рёбра в нашем графе.
Конец работы алгоритма. 
